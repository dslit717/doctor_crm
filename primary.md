[제안서] 차세대 지능형 피부과,성형외과 통합 관리 시스템 (CRM)

1. 개요 및 목적

본 시스템은 피부과 병원의 민감한 의료 데이터를 안전하게 보호함과 동시에, 접수-상담-진료-시술-사후관리로 이어지는 병원 운영 전 과정을 표준화(SOP)하고 AI를 통해 지능화하는 것을 목적으로 합니다.

2. 시스템 인프라 및 보안 (Security)

병원의 자산인 데이터 유출을 방지하고 책임 소재를 명확히 하는 보안 체계입니다.

2.1 접속 제어 및 인증

IP 기반 접근 제한: 원내 등록 IP 접속 시 즉시 로그인 권한 부여.

외부 접속 보안: 외부 IP 접속 시 ID/PW 외에 2차 인증(OTP/SMS) 선택적 활성화 기능 제공.

세션 관리: 장시간 미사용 시 자동 로그아웃 및 중복 로그인 제어.

2.2 상세 보안 로그 (Audit Log) 

접속 로그: 로그인/로그아웃 시간, 접속 기기, 접속 IP를 실시간 기록.

행위 로그: 환자 조회, 수정, 삭제, 예약 변경 및 엑셀 다운로드 등 모든 시스템 조작 내역을 유저별로 저장.

2.3 역할 기반 권한 관리 (RBAC)

병원 운영 주체별로 최적화된 접근 권한을 세분화하여 관리합니다.

2.3.1 역할(Role) 정의

기본 역할: 원장, 부원장, 실장, 코디네이터, 상담사, 의사, 관리사, 간호사 등 사전 정의 역할 제공.

커스텀 역할: 병원 특성에 맞는 사용자 정의 역할 생성 기능.

역할 계층: 상위 역할이 하위 역할 권한을 포함하는 계층 구조 설정.

2.3.2 기능별 접근 제어

메뉴 접근 권한: 역할별로 접근 가능한 메뉴/기능 매트릭스 설정.

CRUD 권한: 데이터 생성(Create), 조회(Read), 수정(Update), 삭제(Delete) 권한 개별 설정.

특수 기능 권한: 엑셀 다운로드, 일괄 수정, 데이터 삭제 등 민감 기능 별도 권한 관리.

2.3.3 데이터 열람 범위

전체 열람: 원장/실장급 - 전체 환자 및 매출 데이터 접근.

부서별 열람: 해당 부서 담당 환자 및 관련 데이터만 접근.

담당 환자 열람: 본인 담당 환자 정보만 접근 가능.

민감 정보 마스킹: 급여, 상세 매출, 개인정보 등 역할에 따른 마스킹 처리.

2.4 유연한 데이터 스키마 관리 (Dynamic Schema)

병원의 특성에 맞게 직원 및 환자 정보 항목을 유동적으로 구성하고 관리합니다. 기본 데이터 구조는 유지하면서 확장 필드를 통해 병원 고유의 정보를 저장할 수 있습니다.

2.4.1 기본 구조 및 설계 원칙

고정 필드(Core Fields): 시스템 운영에 필수적인 항목은 정형화된 컬럼으로 유지 (이름, 연락처, 생년월일 등).

확장 필드(Extended Fields): JSONB 타입을 활용하여 병원별 커스텀 항목을 유연하게 저장.

스키마 분리: 고정 필드는 인덱싱/검색 최적화, 확장 필드는 유연성 확보로 성능과 확장성 동시 달성.

2.4.2 직원 정보 커스터마이징

기본 항목: 사번, 이름, 연락처, 이메일, 입사일, 소속 부서, 역할 등.

표시 설정: 관리 화면에 표시할 기본 항목 ON/OFF 설정.

커스텀 항목 추가: 병원 고유 항목 자유 추가 (예: 좋아하는 음식, 특기, MBTI, 자격증 상세, 담당 장비 등).

항목 타입 지원: 텍스트, 숫자, 날짜, 단일선택, 다중선택, 파일첨부 등 다양한 입력 타입.

2.4.3 환자 정보 커스터마이징

기본 항목: 차트번호, 이름, 연락처, 생년월일, 성별, 내원경로 등.

표시 설정: 환자 카드에 표시할 항목 및 순서 설정.

커스텀 항목 추가: 병원 특화 정보 자유 추가 (예: 피부타입, 알레르기 상세, 선호 시술자, VIP 메모, SNS 계정 등).

항목 그룹화: 관련 항목끼리 그룹핑하여 카테고리별 관리 (기본정보, 의료정보, 마케팅정보 등).

2.4.4 재고/품목 정보 커스터마이징

기본 항목: 품목코드, 품목명, 카테고리, 규격/용량, 단위, 공급업체, 기본단가, 재고수량 등.

표시 설정: 품목 목록 및 상세 화면에 표시할 항목 선택 및 순서 설정.

커스텀 항목 추가: 병원 운영에 필요한 고유 항목 자유 추가.

- 보관 조건 (냉장/냉동/실온/암소보관 등)
- 사용 부위/용도 (얼굴/바디/두피 등)
- 권장 시술 연결 (해당 품목 사용 시술 매핑)
- 대체 품목 정보
- 내부 메모/특이사항
- 제조사/원산지
- 인증 정보 (식약처 인증번호 등)
- 사진/이미지 다중 등록
- 바코드/QR코드

카테고리 커스터마이징: 기본 카테고리(의료소모품, 약품, 화장품 등) 외 병원 맞춤 카테고리 추가.

속성 그룹: 품목 유형별로 다른 속성 세트 적용 (약품은 성분/용법, 화장품은 피부타입/효능 등).

2.4.5 필드 관리 설정

필드 속성 설정:

- 필드명 (한글/영문)
- 입력 타입 (텍스트, 숫자, 날짜, 선택형, 체크박스 등)
- 필수 여부
- 기본값
- 유효성 검사 규칙
- 표시 순서
- 검색 가능 여부
- 목록 표시 여부

선택형 옵션 관리: 단일선택/다중선택 항목의 선택지 관리 및 순서 설정.

필드 비활성화: 사용하지 않는 필드는 삭제 대신 비활성화하여 기존 데이터 보존.

2.4.6 데이터 활용 및 검색

통합 검색: 확장 필드 포함 전체 필드 대상 검색 지원.

필터링: 커스텀 항목을 조건으로 환자/직원 필터링 (예: "피부타입이 건성인 환자").

리포트 연동: 커스텀 항목을 리포트 및 통계 분석에 활용.

내보내기: 확장 필드 포함 엑셀/CSV 내보내기 지원.

2.4.7 기술 구현 가이드 (참고)

데이터베이스 설계:

```
-- 직원 테이블 예시
CREATE TABLE employees (
  id UUID PRIMARY KEY,
  -- 고정 필드 (인덱싱, 검색 최적화)
  employee_no VARCHAR(20) NOT NULL,
  name VARCHAR(100) NOT NULL,
  phone VARCHAR(20),
  email VARCHAR(100),
  department_id UUID,
  role_id UUID,
  hire_date DATE,
  -- 확장 필드 (유연한 커스텀 데이터)
  extended_data JSONB DEFAULT '{}',
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);

-- 환자 테이블 예시
CREATE TABLE patients (
  id UUID PRIMARY KEY,
  -- 고정 필드
  chart_no VARCHAR(20) NOT NULL,
  name VARCHAR(100) NOT NULL,
  phone VARCHAR(20),
  birth_date DATE,
  gender VARCHAR(10),
  -- 확장 필드
  extended_data JSONB DEFAULT '{}',
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);

-- 재고/품목 테이블 예시
CREATE TABLE inventory_items (
  id UUID PRIMARY KEY,
  -- 고정 필드
  item_code VARCHAR(50) NOT NULL,
  item_name VARCHAR(200) NOT NULL,
  category_id UUID,
  unit VARCHAR(20),
  supplier_id UUID,
  base_price DECIMAL(12,2),
  current_stock INTEGER DEFAULT 0,
  min_stock INTEGER,
  max_stock INTEGER,
  expiry_date DATE,
  -- 확장 필드
  extended_data JSONB DEFAULT '{}',
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);

-- JSONB 인덱스 (검색 성능 향상)
CREATE INDEX idx_employees_extended ON employees USING GIN (extended_data);
CREATE INDEX idx_patients_extended ON patients USING GIN (extended_data);
CREATE INDEX idx_inventory_extended ON inventory_items USING GIN (extended_data);
```

extended_data 예시:

```json
// 직원 extended_data
{
  "favorite_food": "파스타",
  "mbti": "ENFP",
  "certifications": ["피부관리사 1급", "메이크업 자격증"],
  "preferred_equipment": ["울쎄라", "피코슈어"],
  "notes": "월요일 오전 미팅 선호"
}

// 환자 extended_data
{
  "skin_type": "건성",
  "allergies": ["아스피린", "페니실린"],
  "preferred_staff": "김상담",
  "vip_memo": "원장님 직접 상담 요청"
}

// 재고/품목 extended_data
{
  "storage_condition": "냉장보관 (2-8°C)",
  "usage_area": ["얼굴", "목"],
  "related_treatments": ["물광주사", "스킨보톡스"],
  "substitute_items": ["품목코드-A123", "품목코드-B456"],
  "manufacturer": "앨러간",
  "origin_country": "미국",
  "certification_no": "식약처-2024-12345",
  "internal_memo": "대량 구매 시 10% 할인 적용",
  "barcode": "8801234567890"
}
```

3. 병원 자원 및 인사 관리 (HR & Operations)

 병원의 인적·물적 자원을 효율적으로 배치하고 스케줄을 통합 관리합니다.

3.1 직원 및 근태 관리 (HR)

직원 프로필: 등록/수정/삭제(소프트 딜리트) 기능을 통해 히스토리 보존.

근태 시스템: 출퇴근 기록, 연차/휴가 신청 및 승인, 오버타임(OT), 임시/대체 근무 관리.

스케줄 동기화: 직원의 근태 현황이 예약 차트의 '담당자 지정 가능 여부'와 실시간 연동.

3.2 운영 정책 설정

운영 스케줄: 기본 진료 시간, 점심시간, 정기 휴무일 설정.

유연한 예외 처리: 공휴일 자동 반영 및 임시 휴무/임시 근무일 수동 지정 기능.

3.3 재고 관리 (Inventory Management)

병원 운영에 필요한 의료 소모품, 약품, 화장품 등의 재고를 체계적으로 관리합니다.

3.3.1 품목 마스터 관리

품목 분류: 의료 소모품, 약품, 화장품/판매 상품, 장비 소모품 등 카테고리별 분류 체계.

품목 정보: 품목코드, 품목명, 규격/용량, 단위, 공급업체, 기본 단가, 최소/최대 재고 수량 설정.

유통기한 관리: 유통기한 보유 품목의 기한 추적 및 FIFO(선입선출) 원칙 적용.

3.3.2 입출고 관리

발주 관리: 공급업체별 발주서 작성, 발주 이력 관리, 정기 발주 스케줄 설정.

입고 관리: 발주 대비 입고 검수, 입고 수량/일자/LOT번호 기록, 입고 단가 변동 추적.

출고 관리: 시술/진료 연동 자동 출고, 판매 출고, 폐기/반품 출고, 부서간 내부 이동.

실사 관리: 정기/비정기 재고 실사, 재고 조정(수량 증감) 및 조정 사유 기록.

3.3.3 재고 현황 및 알림

실시간 현황: 품목별, 카테고리별, 창고/보관 위치별 재고 현황 조회.

안전재고 알림: 최소 재고 수량 미달 시 자동 알림 및 발주 권고.

유통기한 알림: 유통기한 임박 품목(30/60/90일) 사전 경고 알림.

과잉재고 분석: 장기 미사용 재고 및 과잉 보유 품목 식별.

3.3.4 시술/진료 연동

자동 차감: 시술/진료 완료 시 매뉴얼에 정의된 소모품 자동 출고 처리.

소모량 분석: 시술별 평균 소모량 통계 및 원가 분석.

예측 발주: 예약 현황 기반 예상 소모량 계산 및 선제적 발주 지원.

3.3.5 재고 리포트

재고 평가: 기간별 재고 자산 평가(이동평균법/선입선출법).

입출고 통계: 기간별 입고/출고 현황, 품목별 회전율 분석.

비용 분석: 카테고리별/시술별 소모품 비용 통계 및 추이 분석.

공급업체 관리: 공급업체별 거래 현황, 납기 준수율, 가격 변동 추이.

3.4 장비 관리 (Equipment Management)

병원 운영에 필요한 의료 장비를 체계적으로 등록하고 관리합니다.

3.4.1 장비 마스터 관리

장비 등록: 장비명, 모델명, 제조사, 시리얼번호, 구입일, 설치 위치.

장비 분류:

- 레이저 장비: 피코레이저, CO2 레이저, IPL 등
- 리프팅 장비: 울쎄라, 써마지, 인모드 등
- 주사/필러 장비: 물광 주사기, 에어샷 등
- 분석 장비: 피부 분석기, 바디 스캐너 등
- 관리 장비: 클렌징 기기, 마사지 기기 등
- 수술 장비: 마취기, 모니터링 장비 등

자산 관리: 취득가액, 감가상각, 내용연수, 잔존가치 관리.

장비 상태: 정상/점검중/수리중/폐기 상태 관리.

3.4.2 유지보수 관리

정기 점검: 장비별 정기 점검 일정 등록 및 알림.

점검 이력: 점검 일자, 점검 항목, 결과, 담당자 기록.

A/S 관리: 고장 신고, 수리 요청, 수리 이력 관리.

부품/소모품: 장비별 소모품 교체 주기 및 재고 연동.

업체 정보: 제조사/대리점 연락처, 계약 정보 관리.

비용 관리: 유지보수 비용, 부품 교체 비용 기록.

3.4.3 장비 가동 리포트

가동률 분석: 장비별 일/주/월 가동률 통계.

사용 빈도: 시술별, 담당자별 장비 사용 빈도.

수익 기여도: 장비별 매출 기여도 분석.

비용 분석: 장비별 유지보수 비용 대비 수익 분석.

교체 시기 예측: 가동률, 고장 빈도 기반 교체 시기 제안.

4. 서비스 마스터 및 표준 운영 절차 (SOP)

병원 지식을 자산화하여 전 직원이 동일한 고품질 서비스를 제공하도록 설계합니다.

4.1 서비스/상품 마스터

상품 정보: 시술 프로그램, 패키지, 화장품 등 모든 서비스 등록.

가격 관리: 과세(부가세 10%) 및 비과세 항목 구분, 기본 설명 및 소요 시간 설정.

4.2 7단계 직무별 매뉴얼 연동

각 상품별로 7가지 직무별 매뉴얼을 데이터베이스화하여 연결:

코디네이터 매뉴얼 (접수/동의서)

상담 매뉴얼 (셀링 포인트/결합 상품)

진료 매뉴얼 (의사 진단 포인트)

시술 매뉴얼 (에너지/샷 수 가이드)

시술준비 매뉴얼 (준비물/마취 가이드)

관리사 매뉴얼 (진정/후관리 단계)

환자 주의사항 (사후 케어 안내)

4.3 성형외과 특화 기능 (Plastic Surgery)

성형외과 수술 및 시술의 특수성을 반영한 전문 관리 기능입니다.

4.3.1 수술 스케줄 관리

수술실 배정: 수술실, 시술실별 일정 관리 및 장비 가용성 확인.

회복실 관리: 수술 후 회복실 배정 및 경과 모니터링.

수술팀 구성: 집도의, 마취의, 간호사 등 수술팀 자동/수동 배정.

4.3.2 수술 전 관리

수술 전 체크리스트: 금식 확인, 복용약 중단 여부, 건강 상태 점검.

마취 동의서: 마취 방법별 동의서 및 마취 전 평가 기록.

수술 동의서: 수술별 맞춤 동의서 템플릿 및 전자 서명.

수술 시뮬레이션: 3D 시뮬레이션 결과 저장 및 환자 상담 연동.

4.3.3 수술 중 기록

수술 기록지: 수술 시간, 사용 장비, 시술 내역, 특이사항 기록.

마취 기록: 마취 시작/종료 시간, 사용 약물, 바이탈 사인 기록.

사용 자재: 임플란트, 필러 등 사용 자재 LOT번호 추적 기록.

4.3.4 수술 후 관리

회복 모니터링: 회복실 경과 기록, 퇴원 가능 여부 판단.

입원 관리: 입원 환자 병실 배정, 간호 일지, 식이 관리.

경과 관찰: 수술 후 경과 일정 자동 생성 (1일, 7일, 30일, 90일).

전후 사진 비교: 수술 전/후 사진 비교 뷰어, 각도별 촬영 가이드.

4.4 전화 응대 매뉴얼 (Call Script Management)

전화 상담 및 응대를 위한 표준 매뉴얼을 관리하고 LLM을 활용하여 효과적인 응대 스크립트를 작성합니다.

4.4.1 응대 매뉴얼 유형

인바운드 응대:

- 예약 문의: 신규 예약, 예약 변경/취소 응대
- 시술 문의: 시술 종류, 가격, 소요시간, 효과 안내
- 시술 후 문의: 부작용, 경과, 주의사항 관련 응대
- 위치/영업시간: 오시는 길, 주차, 운영 시간 안내
- 가격 문의: 가격표 안내, 이벤트/프로모션 안내
- 컴플레인 응대: 불만 접수, 환불/보상 관련 응대

아웃바운드 응대:

- 예약 확인 콜: 예약 확정/리마인드 전화
- 노쇼 후 콜백: 미방문 환자 사유 확인 및 재예약
- 대기 환자 콜백: 예약 대기 환자 후속 연락
- 만족도 콜: 시술 후 만족도 확인 전화
- 재방문 유도: 장기 미방문 환자 재방문 권유

4.4.2 매뉴얼 구성 요소

스크립트 구조:

- 인사말: 전화 수신/발신 시 표준 인사
- 본인 확인: 환자 본인 확인 절차
- 용건 파악: 문의 내용 파악 질문
- 응대 내용: 상황별 표준 응대 문구
- 마무리: 추가 문의, 마무리 인사
- 예외 처리: 난감한 상황 대응 가이드

응대 팁:

- 말투/어조 가이드라인
- 자주 묻는 질문(FAQ) 답변
- 금지 표현 및 권장 표현
- 에스컬레이션 기준 (상급자 연결)

4.4.3 LLM 기반 매뉴얼 작성 지원

매뉴얼 초안 생성:

- 목적 입력: "신규 예약 문의 응대 매뉴얼" 등 입력 시 초안 자동 생성.
- 상황 시나리오: 다양한 상황별 대화 시나리오 생성.
- 질문-답변 쌍: 예상 질문과 권장 답변 자동 생성.

매뉴얼 개선:

- 문구 다듬기: 전문적이고 친절한 표현으로 개선.
- 추가 상황 제안: 누락된 상황이나 예외 케이스 제안.
- 롤플레이 시뮬레이션: AI와 모의 통화 연습.

시술별 매뉴얼 자동 생성:

- 시술 정보 기반: 등록된 시술 정보로 해당 시술 문의 응대 매뉴얼 생성.
- 주의사항 연동: 시술 전/후 주의사항 자동 포함.
- 가격/시간 연동: 현재 가격, 소요시간 자동 반영.

프롬프트 예시:

- "울쎄라 리프팅 가격 문의 응대 스크립트 작성해줘"
- "노쇼 환자에게 전화할 때 사용할 재예약 유도 스크립트 만들어줘"
- "시술 후 멍이 심하다고 불안해하는 환자 응대 매뉴얼 작성해줘"
- "VIP 환자 응대 시 특별히 주의할 점 정리해줘"

4.4.4 매뉴얼 관리

버전 관리: 매뉴얼 수정 이력 관리 및 이전 버전 복원.

승인 워크플로우: 매뉴얼 작성 → 검토 → 승인 프로세스.

공지/배포: 신규/수정 매뉴얼 직원 공지 및 확인 체크.

효과 분석: 매뉴얼 적용 후 상담 전환율, 고객 만족도 비교.

4.4.5 코디네이터 화면 연동

실시간 매뉴얼 조회:

- 전화 응대 중 즉시 매뉴얼 검색/조회.
- 환자 정보와 함께 관련 매뉴얼 자동 표시.
- 시술별, 상황별 매뉴얼 빠른 접근.

AI 실시간 지원:

- 통화 중 키워드 입력 시 관련 응대 문구 제안.
- 난감한 질문에 대한 AI 답변 추천.
- 에스컬레이션 필요 여부 자동 판단.

통화 메모 연동:

- 통화 내용 간단 메모.
- 메모 기반 후속 조치 자동 생성 (예약 등록, 콜백 등록 등).

5. 환자 및 예약 관리 시스템 (Patient & CRM)

복잡한 피부과 동선을 시각화하고 환자의 생애 주기를 관리합니다.

5.1 환자 통합 카드

데이터 관리: 내원 경로, 유입 마케팅 분석, 환자별 특이사항 및 소프트 딜리트 적용.

상태 추적: 예약완료, 내원(대기), 시술중, 취소, 변경, 노쇼(No-Show) 기록.

5.2 다차원 예약 차트

통합 뷰: 담당 의사/상담사/관리사별, 시술 종류별, 장비/관리실별 필터링 조회.

드래그 앤 드롭: 차트 상에서 즉각적인 예약 시간 및 담당자 변경.

5.2.1 예약 대기/콜백 관리 (Pending Reservation)

예약 상담 후 즉시 예약이 확정되지 않은 환자를 체계적으로 관리하고 후속 조치를 지원합니다.

대기 등록 사유:

- 적합한 시간대 없음: 환자 희망 시간에 예약 불가
- 환자 일정 미확정: 환자가 일정 확인 후 연락 예정
- 가격/견적 검토 중: 견적서 발송 후 결정 대기
- 가족/타인 상의 필요: 의사결정자 상의 후 결정
- 타 병원 비교 중: 경쟁 병원 상담 후 결정
- 기타: 기타 사유 직접 입력

대기 등록 정보:

- 환자 정보 (기존/신규)
- 상담 내용 요약
- 희망 시술/서비스
- 희망 일정 (범위 또는 특정 요일/시간대)
- 대기 사유
- 예상 결정 시점
- 담당 코디네이터
- 후속 연락 예정일
- 메모/특이사항

대기 상태 관리:

- 대기중: 환자 연락/결정 대기
- 연락예정: 후속 연락 필요
- 연락완료: 연락 완료, 결과 대기
- 예약전환: 예약 확정으로 전환됨
- 취소/종료: 예약 의사 없음 또는 기간 만료

후속 조치 기능:

- 연락 이력 기록: 통화/문자/카카오톡 연락 이력 저장
- 메시지 발송: 대기 목록에서 바로 문자/알림톡 발송
- 일괄 발송: 여러 대기 건 선택하여 일괄 메시지 발송
- 예약 전환: 대기 상태에서 바로 예약 생성 연동

자동 알림:

- 후속 연락일 도래 시 담당자에게 알림
- 장기 대기(7일/14일/30일) 환자 리마인드
- 희망 일정 도래 시 예약 가능 여부 체크 알림

대기 목록 조회:

- 전체/담당자별/상태별 필터링
- 대기 기간별 정렬
- 희망 시술별 분류
- 후속 연락 예정일 기준 정렬

콜백 예약 발송 템플릿:

- "적합한 시간 확보" 안내 템플릿
- "결정 리마인드" 템플릿
- "프로모션/이벤트 안내" 템플릿
- 커스텀 템플릿

대기 전환 리포트:

- 대기 → 예약 전환율 분석
- 대기 사유별 전환율
- 평균 대기 기간
- 담당자별 콜백 성공률

5.3 마케팅 CRM 기능 (Marketing CRM)

환자 재방문 유도 및 신규 환자 유입을 위한 마케팅 기능입니다.

5.3.1 타겟 마케팅

세그먼트 생성: 시술 이력, 연령, 성별, 마지막 내원일 기준 타겟 그룹 생성.

캠페인 관리: 마케팅 캠페인 생성, 발송 일정 예약, A/B 테스트 지원.

성과 측정: 캠페인별 발송 수, 열람률, 예약 전환율, ROI 분석.

5.3.2 멤버십 및 포인트

등급 관리: 누적 결제 금액/횟수 기반 VIP, Gold, Silver 등 등급 자동 산정.

포인트 시스템: 결제 금액 대비 포인트 적립, 사용, 소멸 관리.

등급별 혜택: 등급별 할인율, 우선 예약, 전용 서비스 설정.

5.3.3 추천인 프로그램

추천 코드: 환자별 고유 추천 코드 발급 및 추적.

보상 관리: 추천인/피추천인 혜택 자동 지급 (포인트, 할인 쿠폰).

추천 통계: 추천 유입 환자 수, 매출 기여도 분석.

5.3.4 자동화 마케팅

생일/기념일: 생일, 시술 기념일 자동 축하 메시지 발송.

재방문 유도: 마지막 내원 후 일정 기간 경과 시 리마인드 발송.

이탈 방지: 예약 취소/노쇼 환자 대상 재유입 캠페인.

시술 후 관리: 시술별 적정 재시술 시기 도래 시 안내 발송.

5.4 서비스 이행 관리 (Service Fulfillment)

환자가 구매한 서비스/패키지의 이행 상태를 체계적으로 추적하고 관리합니다.

5.4.1 구매 서비스 등록

서비스 유형 분류:

- 단일 시술: 1회성 시술 (예: 보톡스 1회)
- 패키지 상품: 복수 회차 묶음 (예: 리프팅 10회 패키지)
- 프로그램: 기간/단계별 복합 서비스 (예: 피부개선 3개월 프로그램)
- 정기 구독: 월정액 기반 서비스 (예: 월 관리 멤버십)

구매 정보 연동: 결제 완료 시 구매 서비스 자동 등록, 수납 시스템과 실시간 연동.

유효기간 설정: 서비스별 사용 가능 기간 설정 (구매일 기준 N개월).

5.4.2 이행 현황 추적

회차 관리: 패키지 상품의 총 회차, 사용 회차, 잔여 회차 실시간 표시.

진행 상태: 각 회차별 상태 관리.

- 대기: 아직 예약/시술 전
- 예약됨: 예약 완료 상태
- 진행중: 시술 진행 중
- 완료: 시술 완료
- 노쇼: 예약 불이행
- 취소: 회차 취소

단계별 프로그램: 프로그램 상품의 단계별 진행 현황 시각화 (타임라인/프로그레스바).

담당자 기록: 각 회차별 시술 담당자, 시술 일시, 특이사항 기록.

5.4.3 자동 차감 및 연동

시술 완료 연동: 시술 완료 처리 시 해당 서비스 회차 자동 차감.

예약 시 잔여 확인: 예약 생성 시 잔여 회차 자동 확인 및 부족 시 알림.

차트 연동: 환자 차트에서 구매 서비스 현황 즉시 조회.

소모품 연동: 회차 소진 시 연결된 재고 자동 출고 처리.

5.4.4 알림 및 리마인드

잔여 회차 알림: 잔여 1~2회 시 환자 및 담당자에게 알림.

유효기간 알림: 만료 30/14/7일 전 사전 안내 발송.

미사용 알림: 구매 후 일정 기간 미사용 시 리마인드 발송.

소진 완료 알림: 패키지 소진 완료 시 재구매/연장 안내.

5.4.5 서비스 변경 및 환불

회차 추가: 추가 결제를 통한 회차 추가.

유효기간 연장: 사유 기록과 함께 유효기간 연장 처리.

서비스 변경: 동일 금액대 타 서비스로 변경 (차액 정산).

부분 환불: 미사용 회차에 대한 환불 금액 자동 계산.

양도 처리: 가족 등 타인에게 잔여 회차 양도 (병원 정책에 따라).

5.4.6 서비스 이행 리포트

환자별 현황: 환자별 구매 서비스, 잔여 현황, 사용 이력 통합 조회.

서비스별 통계: 서비스/패키지별 판매량, 소진율, 평균 사용 기간.

미소진 분석: 유효기간 만료 예정/만료된 미소진 서비스 현황.

매출 인식: 이행 완료 기준 매출 인식 (선수금 vs 실현 매출 구분).

직원별 이행: 담당자별 서비스 이행 건수 및 환자 만족도 연계.

5.4.7 환자 조회 화면

내 서비스 현황: 환자용 화면에서 본인 구매 서비스 현황 조회.

예약 연동: 잔여 서비스 기반 간편 예약 기능.

이력 조회: 과거 이용 완료 서비스 이력 확인.

6. 스마트 통합 차팅 및 개인화 (Smart Charting)

직무별 전문성을 살리면서 데이터의 흐름을 끊김 없이 연결합니다.

6.1 UI 개인화 관리 (UI Customization)

위젯 레이아웃: 차트 내 구성 요소(B/A 사진, 메모, 오더 등)를 사용자가 원하는 위치로 배치.

서버 동기화: 개인화된 설정값이 계정에 저장되어 어떤 기기에서도 본인의 작업 환경 유지.

6.2 직무별 특화 화면

코디네이터: 실시간 환자 스테이션(동선 추적) 및 수납 관리.

상담사: 견적 빌더, 상담 전환율 및 결제 실패 사유 통계.

의사: 시술 파라미터 기록 및 전후 사진 비교 뷰어.

관리사: 케어 체크리스트 및 사용 제품 로그.

공통: 타 파트 차팅 내역을 실시간 열람하여 유기적인 협업 지원.

6.3 만족도 차트 (Satisfaction Tracking)

각 방문/시술 시마다 주관적 만족도와 객관적 호전지표를 기록하여 환자 경험을 추적합니다.

6.3.1 입력 방식

이중 입력 체계: 모든 만족도 항목은 [등급 + 텍스트] 두 가지 형태로 입력.

- 등급(Grade): 선택형 평가 (매우만족/만족/보통/불만/매우불만 또는 5점 척도)
- 텍스트(Comment): 자유 서술형 코멘트

입력 예시:

```
[주관적 만족도] 매우만족 | "까다롭지 않은 환자, 재방문 의향 높음"
[객관적 호전도] 경과 좋음 | "미백 부분 더 신경써야 함, 다음 내원 시 집중 관리"
```

6.3.2 주관적 만족도 (환자 관점)

환자 피드백: 환자가 직접 평가하는 만족도.

- 시술 만족도: 시술 결과에 대한 만족
- 서비스 만족도: 응대, 대기시간, 시설 등 서비스 전반
- 통증/불편감: 시술 중 느낀 통증 정도
- 재방문 의향: 재방문/추천 의향

직원 관찰 기록: 담당 직원이 관찰한 환자 반응.

- 환자 성향 메모: "까다로움", "협조적", "예민함" 등
- 특이 반응: 시술 중/후 특이 반응 기록
- 컴플레인 여부: 불만 제기 내용 및 처리 결과

6.3.3 객관적 호전지표 (의료진 관점)

의료진 평가: 의사/관리사가 평가하는 객관적 경과.

- 호전 정도: 매우호전/호전/유지/악화 (등급)
- 상세 소견: 구체적인 경과 기록 (텍스트)

부위별 평가: 시술 부위별 개별 평가 가능.

- 예: 얼굴 전체 "호전" | 볼 부위 "미백 추가 필요"

비교 지표: 정량적 측정값 기록 (선택적).

- 수치 기록: 모공 크기, 색소 침착도, 탄력도 등
- 장비 측정값: 피부 분석 장비 측정 결과 연동

사진 비교: Before/After 사진과 만족도 연계 기록.

6.3.4 시술별 만족도 설정

항목 커스터마이징: 시술별로 평가할 만족도 항목 설정.

- 보톡스: 자연스러움, 효과 지속성, 통증
- 리프팅: 즉각 효과, 붓기/멍, 만족도
- 레이저: 호전도, 다운타임, 재시술 의향

등급 옵션 설정: 각 항목별 선택 가능한 등급 옵션 정의.

필수/선택 설정: 필수 입력 항목과 선택 입력 항목 구분.

6.3.5 만족도 추이 분석

환자별 추이: 동일 환자의 방문별 만족도 변화 추이 그래프.

시술별 추이: 특정 시술에 대한 회차별 만족도/호전도 추이.

비교 분석: 시술 전후, 회차별 사진과 만족도 연계 비교.

6.3.6 만족도 리포트

환자별 리포트: 개별 환자의 전체 만족도 이력 및 평균.

시술별 통계: 시술/서비스별 평균 만족도, 불만 사유 분석.

직원별 통계: 담당 직원별 환자 만족도 평균.

기간별 추이: 월별/분기별 만족도 트렌드 분석.

컴플레인 분석: 불만 사유 유형별 분류 및 개선 포인트 도출.

6.3.7 만족도 활용

자동 알림: 만족도 낮은 환자 대상 특별 케어 알림.

마케팅 연동: 높은 만족도 환자 대상 리뷰 요청/추천 프로그램 연계.

품질 개선: 만족도 데이터 기반 서비스 개선 인사이트 도출.

인센티브 연동: 직원 성과 평가 시 환자 만족도 지표 반영.

6.4 스마트 상담 시스템 (Smart Consultation)

환자 상담 과정을 지능화하고, 민감 정보 보호와 AI 기반 추천을 통해 효과적인 상담을 지원합니다.

6.4.1 상담 화면 커스터마이징

레이아웃 설정: 상담 화면 구성 요소(환자정보, 상담내역, 추천상품, 견적 등)의 배치를 자유롭게 설정.

위젯 ON/OFF: 필요한 위젯만 선택하여 화면 구성.

- 환자 기본정보 위젯
- 시술 이력 위젯
- 사진 비교 위젯
- 추천 프로그램 위젯
- 견적서 작성 위젯
- 상담 메모 위젯
- 결제/수납 위젯

화면 모드: 상담 단계별 최적화된 화면 프리셋.

- 초진 상담 모드
- 재진 상담 모드
- 시술 후 상담 모드
- 클레임 대응 모드

개인/병원 설정: 상담사 개인 설정 또는 병원 표준 설정 선택 가능.

6.4.2 민감 정보 보호 (Privacy Mode)

듀얼 뷰 시스템: 상담사용 화면과 환자 공유용 화면 분리.

- 상담사 화면: 모든 정보 표시 (내부 메모, 가격 정책, 마진 등)
- 환자 공유 화면: 민감 정보 자동 가림 처리

가림 처리 대상 설정:

- 내부 메모/직원 코멘트: "까다로운 환자", "가격 민감" 등
- 원가/마진 정보
- 타 환자 비교 정보
- 내부 프로모션 조건
- 직원 인센티브 정보
- 기타 커스텀 민감 필드

화면 전환: 원클릭으로 환자 공유 모드 전환 (단축키 지원).

환자 동석 알림: 환자 공유 모드 활성화 시 시각적 표시 (테두리 색상 변경 등).

공유 화면 출력: 환자용 화면을 별도 모니터/태블릿에 미러링.

6.4.3 환자 니즈/상태 분석

상담 시작 입력:

- 주요 고민: 주름, 탄력, 색소, 모공, 여드름, 흉터, 윤곽 등 (다중 선택)
- 고민 부위: 이마, 눈가, 볼, 턱선, 목 등 부위별 선택
- 희망 효과: 즉각 효과, 자연스러움, 지속성 등 우선순위
- 예산 범위: 예산 구간 선택
- 다운타임 허용: 가능 일수 선택
- 통증 민감도: 매우 민감 ~ 무관
- 시술 경험: 초진/경험자/숙련자
- 특이사항: 알레르기, 임신 여부, 기저질환 등

피부 상태 입력:

- 피부 타입: 건성/지성/복합성/민감성
- 현재 상태: 피부 분석 장비 연동 또는 수동 입력
- 과거 시술 반응: 이전 시술 효과/부작용 이력

6.4.4 AI 기반 프로그램 추천

추천 엔진: 입력된 니즈/상태 기반 최적 프로그램 자동 추천.

추천 데이터 소스:

- 병원 내부 DB: 동일 조건 환자의 시술 이력 및 만족도
- 중앙 서버 DB: 전체 네트워크의 익명화된 시술 데이터
- AI 분석: LLM 기반 최신 트렌드 및 효과 분석

추천 결과 표시:

- 1순위/2순위/3순위 추천 프로그램
- 각 프로그램별 매칭 점수 (니즈 부합도 %)
- 예상 효과 및 주의사항
- 예상 비용 및 소요 시간
- 유사 환자 만족도 통계

추천 근거 표시: 왜 이 프로그램을 추천하는지 AI가 설명.

비교 뷰: 추천 프로그램들을 나란히 비교하는 화면.

6.4.5 상담 정보 통합 뷰

프로그램 상세 정보: 추천/선택된 프로그램의 상세 정보 즉시 조회.

- 시술 설명 및 원리
- Before/After 갤러리 (동의받은 사례)
- 소요 시간 및 회차
- 주의사항 및 부작용
- 시술 후 관리 안내
- FAQ

매뉴얼 연동: 4.2 직무별 매뉴얼에서 상담 매뉴얼 자동 연결.

영상/자료: 시술 설명 영상, PDF 자료 등 환자 설명용 콘텐츠.

가격 시뮬레이션: 조합/패키지/할인 적용 시 가격 자동 계산.

6.4.6 상담 데이터 관리

상담 기록 저장:

- 상담 일시, 담당 상담사
- 환자 니즈/상태 입력값
- AI 추천 내역 및 선택 결과
- 상담 메모 및 특이사항
- 견적 발송 여부 및 내용
- 상담 결과 (계약/보류/거절)

이력 조회: 환자별 전체 상담 이력 타임라인.

상담 전환 분석: 상담 → 계약 전환율, 보류 사유, 거절 사유 통계.

6.4.7 타 직무 연동 (Data Sharing)

코디네이터 화면:

- 상담 예정 환자의 니즈/상태 사전 확인
- 상담 완료 환자의 결과 및 예약 필요 여부 확인
- 환자 특성 메모 (민감 정보 권한에 따라 제한적 표시)

관리사 화면:

- 시술 전 환자의 상담 내역 및 기대치 확인
- 추천된 프로그램 및 주의사항 확인
- 시술 후 피드백 입력 → 상담 데이터에 반영

의사 화면:

- 상담 내역 및 환자 니즈 확인
- 의학적 소견 추가 입력
- 추천 프로그램 수정/승인

데이터 권한 설정: 역할별 조회 가능한 상담 데이터 범위 설정.

6.4.8 AI/중앙서버 연동

실시간 AI 지원:

- 상담 중 AI 어시스턴트 호출
- 환자 질문에 대한 답변 제안
- 경쟁사 가격/프로모션 정보 제공 (중앙서버)
- 최신 시술 트렌드 정보

중앙서버 데이터 활용:

- 익명화된 시술 통계 (효과, 만족도, 부작용률)
- 가격 벤치마크 (지역별, 규모별)
- 베스트 프랙티스 상담 스크립트
- 신규 시술/장비 정보

데이터 기여: 병원 데이터의 익명화된 형태로 중앙서버 기여 (선택적).

오프라인 모드: 네트워크 불안정 시 로컬 데이터 기반 추천.

6.5 차트 입력 항목 커스터마이징 (Chart Customization)

상담차트, 의사차트, 관리차트 등 각 차트의 입력 항목을 병원 특성에 맞게 설정하고 관리합니다.

6.5.1 차트 유형별 설정

상담차트 설정:

- 기본 항목: 상담일시, 담당자, 주호소, 상담내용, 추천시술, 견적
- 커스텀 항목 추가: 병원 특화 상담 항목 자유 추가
- 예: 경쟁병원 상담 여부, 의사결정자(본인/가족), 상담 경로, 관심 부위 상세

의사차트 (진료차트) 설정:

- 기본 항목: 진료일시, 담당의, 주소(Chief Complaint), 현병력, 과거력, 이학적 소견, 진단, 처방
- 커스텀 항목 추가: 피부과/성형외과 특화 진료 항목
- 예: 피부 상태 점수, 시술 부위 마킹, 에너지 세팅값, 사용 약물/용량, 시술 전 사진 태그

관리차트 (시술차트) 설정:

- 기본 항목: 시술일시, 담당 관리사, 시술명, 사용 제품, 시술 부위, 시술 시간
- 커스텀 항목 추가: 관리 특화 항목
- 예: 고객 컨디션, 시술 강도, 사용 장비 설정값, 마취 방법/시간, 즉각 반응, 홈케어 안내 여부

6.5.2 입력 항목 관리

항목 속성 설정:

- 항목명 (한글/영문)
- 입력 타입: 텍스트(단문/장문), 숫자, 날짜/시간, 단일선택, 다중선택, 체크박스, 파일첨부, 서명
- 필수/선택 여부
- 기본값 설정
- 도움말/가이드 텍스트
- 입력 유효성 검사 규칙
- 표시 조건 (특정 조건 시에만 표시)

항목 그룹화:

- 관련 항목을 섹션으로 그룹핑
- 섹션 접기/펼치기 기능
- 섹션별 표시 순서 설정

선택형 옵션 관리:

- 단일선택/다중선택 항목의 선택지 관리
- 선택지 순서 설정
- 선택지 비활성화 (기존 데이터 보존)
- 선택지별 연계 동작 설정 (특정 선택 시 추가 항목 표시)

6.5.3 시술별 차트 템플릿

시술 연동 템플릿: 시술/서비스별로 다른 차트 항목 세트 적용.

- 보톡스 차트: 주입 부위, 단위수, 희석 비율, 주입 포인트 수
- 필러 차트: 제품명, 주입량(cc), 주입 부위, 주입 깊이
- 레이저 차트: 장비명, 에너지 세팅, 샷 수, 패스 횟수
- 리프팅 차트: 장비명, 라인 수, 깊이 설정, 에너지 레벨
- 관리 차트: 사용 제품, 관리 시간, 압력/강도, 고객 반응

템플릿 상속: 기본 템플릿을 상속받아 시술별 변형 생성.

복합 시술 처리: 여러 시술 동시 진행 시 해당 템플릿들 병합 표시.

6.5.4 차트 레이아웃 설정

영역 배치: 차트 화면 내 입력 영역 위치 설정.

- 좌우 2단/3단 레이아웃
- 상하 분할
- 탭 방식

입력 순서: 탭/엔터 키 이동 순서 설정.

화면 밀도: 한 화면에 표시할 항목 수 조절 (촘촘히/여유롭게).

필수 항목 강조: 필수 입력 항목 시각적 강조 방식 설정.

6.5.5 차트 템플릿 관리

병원 표준 템플릿: 병원 전체 적용 표준 차트 양식.

부서별 템플릿: 부서/팀별 특화 차트 양식.

개인 템플릿: 개인 선호에 맞춘 차트 양식 (선택적 사용).

템플릿 버전 관리: 템플릿 변경 이력 관리 및 이전 버전 복원.

템플릿 복사/내보내기: 타 병원/지점 간 템플릿 공유.

6.5.6 자주 사용 문구 (Quick Text)

문구 라이브러리: 자주 사용하는 문구를 저장하여 빠르게 입력.

- 개인 문구: 개인별 저장 문구
- 병원 공용 문구: 전 직원 공유 표준 문구
- 시술별 문구: 시술 유형에 따른 권장 문구

단축 코드: 단축 코드 입력 시 전체 문구로 자동 변환.

- 예: "#경과양호" → "시술 부위 경과 양호하며, 특이 부작용 없음. 다음 내원 시 추가 관찰 예정."

AI 문구 추천: 입력 중인 내용 기반 문구 자동 완성 제안.

6.5.7 차트 간 데이터 연동

자동 데이터 전달: 이전 차트의 정보가 다음 차트로 자동 연동.

- 상담차트 → 의사차트: 주호소, 희망시술, 예산 등
- 의사차트 → 관리차트: 진단, 처방, 시술 지시 등
- 관리차트 → 만족도차트: 시술 내역, 담당자 등

참조 표시: 연동된 데이터는 출처 표시 및 원본 차트 바로가기.

수정 권한: 연동된 데이터의 수정 가능 여부 설정.

6.5.8 데이터 저장 구조

고정 필드 + 확장 필드: 2.4 유연한 데이터 스키마와 동일한 구조 적용.

```
-- 상담차트 테이블 예시
CREATE TABLE consultation_charts (
  id UUID PRIMARY KEY,
  patient_id UUID NOT NULL,
  staff_id UUID NOT NULL,
  consultation_date TIMESTAMP,
  -- 고정 필드
  chief_complaint TEXT,
  recommended_treatment TEXT,
  estimated_price DECIMAL,
  -- 확장 필드 (커스텀 항목)
  extended_data JSONB DEFAULT '{}',
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);

-- 확장 필드 예시
{
  "competitor_consultation": true,
  "decision_maker": "본인",
  "interest_areas": ["이마", "눈가", "팔자"],
  "budget_range": "100-200만원",
  "urgency": "1개월 내",
  "custom_field_1": "값1"
}
```

7. AI 지능형 지원 시스템 (AI Intelligence)

미래 확장성을 고려한 지능형 데이터 분석 모듈입니다.

7.1 지능형 매뉴얼 분석

Intelligence DB 비교: 중앙 서버의 표준 매뉴얼과 병원 로직을 비교하여 오류나 미흡한 점 분석.

최적화 추천: 최신 가이드라인에 따른 매뉴얼 업데이트 및 시술 효율화 제안.

7.2 데이터 예측 분석

내원객 예측: 방문 통계를 바탕으로 미래 내원 환자 추이 및 매출 예측.

노쇼 위험도 알림: 환자 패턴 분석을 통한 노쇼 가능성 사전 감지.

마케팅 인사이트: 유입 경로 대비 매출 기여도를 분석하여 효율적인 광고 집행 제안.

7.3 LLM/MCP 연동 (AI Integration)

대규모 언어 모델(LLM)과 MCP 프로토콜을 활용한 차세대 AI 연동 기능입니다.

7.3.1 자연어 인터페이스

데이터 조회: 자연어 질의로 데이터 조회 ("이번 달 울쎄라 매출 알려줘", "오늘 예약 현황").

리포트 생성: 음성/텍스트 명령으로 맞춤 리포트 자동 생성.

업무 지시: 자연어로 예약 등록, 일정 변경 등 시스템 조작 지원.

7.3.2 AI 상담 지원

시술 추천: 환자 피부 상태, 고민, 예산 기반 최적 시술 추천.

상담 스크립트: 상담 시 활용 가능한 AI 기반 멘트 제안.

FAQ 자동 응대: 자주 묻는 질문 AI 자동 응답 (영업시간, 가격, 주차 등).

상담 요약: 상담 내용 자동 요약 및 핵심 포인트 추출.

7.3.3 AI 차팅 보조

음성 기록: 진료/상담 중 음성을 텍스트로 자동 변환하여 차트 기록.

자동 분류: 기록 내용을 자동으로 항목별 분류 (주소, 진단, 처방 등).

오류 검출: 차트 기록 내 오류나 누락 항목 자동 감지 및 알림.

7.3.4 MCP 프로토콜 연동

표준 인터페이스: MCP(Model Context Protocol) 기반 외부 AI 에이전트 연동.

확장 가능 구조: 다양한 LLM 모델(GPT, Claude 등) 플러그인 방식 연결.

컨텍스트 관리: 환자 정보, 시술 이력 등 컨텍스트 안전한 전달 체계.

권한 제어: AI 접근 가능 데이터 범위 및 실행 가능 기능 제한 설정.

8. 사후 관리 및 자동화

운영의 수고를 덜고 환자 만족도를 높이는 사후 관리 기능입니다.

8.1 스마트 알림 시스템

예약 리마인드: 예약 전일/당일 자동 알림톡 발송.

시술 후 안내: 시술별 주의사항 매뉴얼 자동 발송.

경과 관찰 알림: 수술/시술 후 경과 확인 일정 리마인드.

미수금 알림: 결제 예정일 도래 시 자동 안내.

8.2 동의서 및 서류 관리 (Document Management)

병원 운영에 필요한 각종 동의서와 서류를 전자화하여 관리합니다.

8.2.1 동의서 템플릿 관리

시술별 동의서: 각 시술/수술별 맞춤 동의서 템플릿 관리.

필수 동의서: 개인정보 수집/이용 동의서, 마케팅 수신 동의서.

촬영 동의서: Before/After 사진 촬영 및 활용 동의서.

마취 동의서: 마취 종류별(국소/수면/전신) 전문 동의서.

8.2.2 전자 서명 시스템

태블릿 서명: 태블릿 기반 자필 서명 및 본인 확인.

모바일 서명: 사전 발송 링크를 통한 원격 동의서 서명.

서명 검증: 서명 시간, IP, 기기 정보 자동 기록.

8.2.3 서류 관리

버전 관리: 동의서 양식 변경 이력 관리 및 적용 시점 기록.

유효기간 관리: 동의서 유효기간 설정 및 만료 시 재동의 요청.

일괄 조회: 환자별 서명 완료/미완료 동의서 현황 조회.

출력/발급: 서명 완료 동의서 PDF 출력 및 환자 발송.

8.3 역할별 BI 대시보드 (Role-based Dashboard)

병원 운영 주체별로 최적화된 대시보드를 제공합니다.

8.3.1 원장 대시보드

매출 현황: 일별/주별/월별 매출 추이, 전년 동기 대비 분석.

손익 분석: 매출 대비 비용(인건비, 재료비, 운영비) 분석.

KPI 트렌드: 핵심 성과 지표 트렌드 및 목표 달성률.

경쟁 분석: 시술별 시장 트렌드 및 가격 경쟁력 분석.

8.3.2 실장 대시보드

운영 효율: 예약률, 가동률, 대기 시간 분석.

직원 성과: 직원별 상담 전환율, 시술 건수, 매출 기여도.

재고 현황: 주요 품목 재고 상태 및 발주 필요 알림.

고객 만족도: 리뷰, 설문 결과 종합 분석.

8.3.3 상담사 대시보드

개인 실적: 상담 건수, 전환율, 매출 실적 현황.

상담 파이프라인: 상담 중/견적 발송/계약 대기 현황.

목표 달성률: 월간/분기 목표 대비 달성률 시각화.

고객 인사이트: 담당 환자 재방문 주기, 선호 시술 분석.

8.3.4 코디네이터 대시보드

실시간 현황: 대기 환자, 진행 중 시술, 수납 대기 현황.

동선 모니터링: 환자별 체류 시간, 병목 구간 분석.

일일 정산: 당일 수납 현황, 미수금, 환불 내역.

예약 현황: 당일/익일 예약 현황 및 준비 사항.

8.3.5 대시보드 커스터마이징 시스템

각 역할별 대시보드는 사용자가 자유롭게 커스터마이징할 수 있는 위젯 기반 시스템으로 구성됩니다.

#### 위젯 컴포넌트 구조

**컴포넌트 유형**:
- 통계 카드: 단일 수치 표시 (매출, 예약 수, 환자 수 등).
- 차트: 선형, 막대, 원형, 영역 차트 등 데이터 시각화.
- 테이블: 목록 형태 데이터 (예약 목록, 환자 목록 등).
- 타임라인: 시간 기반 이벤트 흐름 표시.
- 게이지: 목표 달성률, 진행률 표시.
- 캘린더: 일정 요약 위젯.
- 알림/태스크: 할 일, 알림 목록.
- 커스텀: 복합 정보 위젯.

**컴포넌트 공통 속성**:
- 위젯 ID (고유 식별자).
- 위젯 타입 (chart, table, stat, gauge 등).
- 데이터 소스 연결.
- 새로고침 주기 설정.
- 권한 레벨 (열람 가능 역할 지정).

#### 레이아웃 관리

**그리드 시스템**:
- 반응형 그리드 레이아웃 (12 컬럼 기준).
- 위젯별 너비/높이 지정 (그리드 단위).
- 최소/최대 크기 제한.
- 자동 레이아웃 정렬.

**배치 설정**:
- 드래그앤드롭 위젯 이동.
- 리사이즈 핸들로 크기 조절.
- 위젯 간 간격 조정.
- 행/열 순서 변경.

**레이아웃 저장**:
- 사용자별 레이아웃 저장.
- 역할별 기본 레이아웃 템플릿.
- 레이아웃 내보내기/가져오기.
- 기본 레이아웃 초기화.

```sql
-- 대시보드 레이아웃 저장 테이블
CREATE TABLE dashboard_layouts (
  id UUID PRIMARY KEY,
  user_id UUID NOT NULL,
  role_type VARCHAR(50),
  layout_name VARCHAR(100),
  is_default BOOLEAN DEFAULT false,
  grid_config JSONB DEFAULT '{}',
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);

-- 레이아웃 그리드 설정 예시
{
  "columns": 12,
  "row_height": 60,
  "margin": [10, 10],
  "widgets": [
    {
      "id": "widget_1",
      "type": "stat_card",
      "title": "오늘 매출",
      "x": 0, "y": 0, "w": 3, "h": 2,
      "data_source": "sales.today",
      "refresh_interval": 60
    },
    {
      "id": "widget_2",
      "type": "line_chart",
      "title": "주간 매출 추이",
      "x": 3, "y": 0, "w": 6, "h": 4,
      "data_source": "sales.weekly_trend",
      "refresh_interval": 300
    },
    {
      "id": "widget_3",
      "type": "table",
      "title": "오늘 예약",
      "x": 9, "y": 0, "w": 3, "h": 6,
      "data_source": "appointments.today",
      "refresh_interval": 30
    }
  ]
}
```

#### 글로벌 필터 연동

**날짜 필터**:
- 공통 날짜 범위 선택기 (오늘, 이번 주, 이번 달, 사용자 지정).
- 날짜 변경 시 모든 위젯 동기화 업데이트.
- 위젯별 날짜 필터 오버라이드 옵션.

**기타 필터**:
- 담당자 필터 (전체 위젯 적용).
- 시술 카테고리 필터.
- 지점 필터 (다지점 운영 시).

**필터 동작**:
- 필터 변경 → 전체 위젯 데이터 재요청.
- 로딩 상태 표시 (스켈레톤/스피너).
- 필터 조합 저장 (프리셋).

#### 실시간 업데이트

**새로고침 전략**:
- 자동 새로고침: 위젯별 주기 설정 (30초, 1분, 5분 등).
- 수동 새로고침: 개별 위젯 / 전체 대시보드 새로고침 버튼.
- WebSocket 실시간 연동: 주요 이벤트 Push 업데이트.

**업데이트 표시**:
- 마지막 업데이트 시간 표시.
- 데이터 변경 시 하이라이트 애니메이션.
- 연결 상태 인디케이터.

#### 위젯 설정

**개별 위젯 설정**:
- 제목 수정.
- 표시 항목 선택 (테이블 컬럼, 차트 시리즈 등).
- 정렬 기준 설정.
- 표시 건수 제한.
- 색상/스타일 커스터마이징.

**알림 설정**:
- 임계값 도달 시 알림 (매출 목표, 재고 부족 등).
- 알림 수신 방법 (화면, 이메일, SMS).
- 알림 조건 활성화/비활성화.

8.3.6 위젯 라이브러리

**매출 관련**:
- 일별/주별/월별 매출 카드.
- 매출 추이 차트.
- 시술별 매출 비중 파이차트.
- 전년 동기 비교 차트.

**예약 관련**:
- 오늘 예약 현황 카드.
- 예약률/취소율 게이지.
- 시간대별 예약 분포.
- 담당자별 예약 현황.

**환자 관련**:
- 신규/재진 환자 수 카드.
- 환자 유입 경로 차트.
- VIP 환자 목록.
- 노쇼 위험 환자 알림.

**운영 관련**:
- 직원 근태 현황.
- 재고 알림 목록.
- 장비 가동 현황.
- 대기 환자 현황.

**성과 관련**:
- 목표 달성률 게이지.
- 상담 전환율 차트.
- 직원별 성과 순위.
- KPI 스코어카드.

리포트 내보내기: 대시보드 데이터 엑셀/PDF 내보내기.

9. 결제 및 수납 관리 (Payment & Billing)

병원의 모든 결제와 수납을 체계적으로 관리하는 핵심 시스템입니다.

9.1 결제 수단 관리

다양한 결제: 현금, 신용카드, 체크카드, 계좌이체, 간편결제(카카오페이, 네이버페이 등).

복합 결제: 여러 결제 수단 조합 결제 지원.

할부 결제: 카드사별 무이자 할부 정보 관리 및 할부 결제 처리.

PG 연동: 주요 PG사(KG이니시스, NHN KCP 등) 결제 모듈 연동.

9.2 수납 처리

즉시 수납: 시술/진료 완료 후 즉시 수납 처리.

선수납: 패키지, 선결제 금액 관리 및 차감 처리.

분납 관리: 분납 일정 등록, 납부 알림, 연체 관리.

부분 수납: 일부 금액만 수납 후 잔액 관리.

9.3 미수금 관리

미수금 현황: 환자별, 기간별 미수금 현황 조회.

독촉 알림: 미수금 발생 시 자동 알림톡/문자 발송.

수금 이력: 미수금 회수 이력 및 담당자 기록.

장기 미수금: 장기 미수금 목록 관리 및 대손 처리.

9.4 환불 처리

환불 신청: 환불 사유, 금액, 방법 등록.

승인 워크플로우: 금액별 환불 승인 권한 설정.

부분 환불: 패키지 일부 사용 후 잔여분 환불 계산.

환불 이력: 환불 처리 내역 및 사유 기록.

9.5 세금 및 정산

과세/비과세 분리: 항목별 과세/비과세 자동 분류.

세금계산서: 전자세금계산서 발행 및 국세청 연동.

현금영수증: 현금영수증 자동/수동 발행.

일일 정산: 결제 수단별 일일 정산 및 시재 관리.

월 마감: 월별 매출 마감 및 회계 데이터 연동.

10. 메시징 연동 (Messaging Integration)

solapi 기반의 통합 메시징 시스템으로 환자와의 커뮤니케이션을 자동화합니다.

10.1 메시징 채널

10.1.1 SMS/LMS/MMS

SMS: 단문 문자 (90byte 이하)
LMS: 장문 문자 (2,000byte 이하)
MMS: 이미지 첨부 문자 발송

발신번호 관리: 사전 등록된 발신번호로 발송.

10.1.2 카카오 알림톡

템플릿 기반: 카카오 승인 템플릿을 통한 알림 발송.

버튼 지원: 웹링크, 앱링크, 배송조회 등 버튼 추가.

대체 발송: 알림톡 실패 시 SMS/LMS 자동 대체 발송.

10.1.3 카카오 친구톡

광고성 메시지: 마케팅/프로모션 메시지 발송.

이미지 첨부: 이미지형 친구톡 지원.

수신 동의: 마케팅 수신 동의 환자에게만 발송.

10.1.4 RCS (Rich Communication Services)

리치 메시지: 이미지, 버튼, 캐러셀 등 풍부한 메시지.

브랜드 인증: 병원 브랜드 프로필 표시.

대체 발송: RCS 미지원 시 SMS 자동 대체.

10.2 자동 발송 설정

10.2.1 예약 관련 알림

예약 확정: 예약 완료 즉시 확정 안내 발송.

예약 리마인드: 예약 D-1, D-Day 리마인드 발송.

예약 변경/취소: 예약 변경 또는 취소 시 안내.

노쇼 후 안내: 노쇼 발생 시 재예약 유도 메시지.

10.2.2 시술 관련 알림

시술 전 안내: 시술 전 주의사항 (금식, 화장 등) 발송.

시술 후 안내: 시술별 사후 관리 주의사항 자동 발송.

경과 관찰: 수술/시술 후 경과 확인 일정 리마인드.

재시술 안내: 시술별 적정 재시술 시기 도래 시 안내.

10.2.3 결제 관련 알림

결제 완료: 결제 완료 영수증 발송.

분납 알림: 분납 결제 예정일 리마인드.

미수금 안내: 미수금 발생 시 납부 안내.

10.2.4 마케팅 알림

생일 축하: 생일 축하 메시지 및 쿠폰 발송.

기념일: 첫 방문 기념일, 시술 기념일 등.

프로모션: 이벤트, 할인 프로모션 안내 (수신 동의자).

휴면 고객: 장기 미방문 고객 재방문 유도.

10.3 템플릿 관리

10.3.1 알림톡 템플릿

템플릿 등록: 카카오 심사용 템플릿 등록 및 관리.

변수 설정: #{이름}, #{예약일시}, #{시술명} 등 변수 매핑.

승인 상태: 검수중/승인/반려 상태 관리.

템플릿 분류: 용도별 템플릿 그룹 관리.

10.3.2 문자 템플릿

병원 표준: 병원 전체 사용 표준 템플릿.

시술별 템플릿: 시술 종류별 맞춤 템플릿.

개인 템플릿: 담당자별 커스텀 템플릿 (선택적).

변수 자동 치환: 환자명, 일시, 담당자 등 자동 입력.

10.3.3 LLM 기반 메시지 작성 지원

AI를 활용하여 효과적인 메시지 작성을 지원합니다.

메시지 자동 생성:

- 상황별 추천: 발송 목적(예약 안내, 리마인드, 마케팅 등) 선택 시 적합한 메시지 초안 생성.
- 환자 맞춤: 환자 정보(이름, 시술 이력, 성향 등) 기반 개인화된 메시지 제안.
- 톤앤매너 설정: 격식체/비격식체, 친근함/정중함 등 어조 선택.

메시지 개선 제안:

- 문장 다듬기: 작성된 메시지의 문법, 표현 개선.
- 길이 조절: SMS 글자 수 제한에 맞게 요약 또는 LMS로 확장.
- 이모지 추천: 상황에 맞는 이모지 추가 제안.

템플릿 생성 도우미:

- 목적 입력: "노쇼 환자 재예약 유도" 등 목적 입력 시 템플릿 초안 생성.
- 변수 자동 삽입: 적절한 위치에 #{이름}, #{시술명} 등 변수 자동 배치.
- A/B 테스트 문구: 동일 목적의 다양한 버전 템플릿 생성.

발송 효과 예측:

- 메시지 분석: 작성된 메시지의 예상 반응률 분석.
- 개선 포인트: 더 효과적인 문구를 위한 수정 제안.
- 발송 시간 추천: 환자 특성 기반 최적 발송 시간 제안.

프롬프트 예시:

- "#{이름}님께 내일 예약 리마인드 메시지를 친근하게 작성해줘"
- "3개월간 미방문한 VIP 환자에게 재방문 유도 메시지 작성해줘"
- "보톡스 시술 후 주의사항 안내 메시지를 간결하게 만들어줘"

10.4 발송 관리

10.4.1 발송 설정

발송 시간대: 발송 허용 시간대 설정 (야간 발송 제한).

발송 제한: 동일 환자 일일/주간 최대 발송 횟수 제한.

중복 방지: 동일 내용 중복 발송 방지.

테스트 발송: 실제 발송 전 테스트 발송 기능.

10.4.2 수동 발송

개별 발송: 특정 환자에게 즉시 메시지 발송.

그룹 발송: 환자 그룹/세그먼트 대상 일괄 발송.

예약 발송: 특정 일시에 발송 예약.

발송 승인: 대량 발송 시 관리자 승인 워크플로우.

10.4.3 발송 이력

발송 로그: 모든 발송 내역 기록 (일시, 수신자, 내용, 결과).

상태 추적: 발송중/성공/실패/대체발송 상태.

실패 원인: 발송 실패 시 원인 코드 및 설명.

재발송: 실패 건 선택 재발송.

10.5 수신 동의 관리

동의 수집: 예약/내원 시 메시징 수신 동의 수집.

동의 유형:

- 필수 알림: 예약/결제 등 서비스 관련 (옵트아웃 불가)
- 마케팅: 광고성 메시지 (별도 수신 동의 필수)

동의 이력: 동의/철회 일시 및 방법 기록.

수신 거부: 수신 거부 처리 및 발송 목록 자동 제외.

080 수신거부: 080 무료 수신거부 번호 연동.

10.6 비용 및 통계

10.6.1 비용 관리

잔여 크레딧: solapi 잔여 포인트/크레딧 현황.

충전 알림: 잔여 크레딧 부족 시 알림.

비용 추적: 발송 유형별 비용 추적.

예산 설정: 월간 발송 예산 설정 및 초과 시 알림.

10.6.2 발송 통계

발송 현황: 일별/주별/월별 발송량 통계.

채널별 분석: SMS/알림톡/친구톡 등 채널별 통계.

성공률: 발송 성공/실패율 분석.

비용 분석: 기간별, 유형별 발송 비용 분석.

효과 분석: 마케팅 메시지 발송 후 예약 전환율 분석.